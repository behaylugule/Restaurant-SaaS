{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/behaylu/Documents/project/upwork/postwork/bookshelf/frontend/lib/axios.ts"],"sourcesContent":["import axios from 'axios'\nimport toast from 'react-hot-toast'\n\n\nconst apiBaseUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api'\n\nconst api = axios.create({\n    baseURL:apiBaseUrl\n})\n\n\napi.interceptors.request.use(\n    (config)=>{\n        console.log(\"base URL\",apiBaseUrl)\n        if(typeof window !=='undefined'){\n            const token = localStorage.getItem('access')\n            if(token){\n                config.headers.Authorization = `Bearer ${token}`\n            }\n        }\n\n          // Ensure Content-Type is set for POST, PUT, PATCH requests\n        if (\n            config.method === 'post' ||\n            config.method === 'put' ||\n            config.method === 'patch'\n        ) {\n            if (!config.headers['Content-Type']) {\n                config.headers['Content-Type'] = 'application/json'\n            }\n        }\n        return config\n    },\n    (error)=>Promise.reject(error)\n)\n\napi.interceptors.response.use(\n    (response)=>response,\n    async (error)=>{\n        const originalRequest = error.config\n        if(error.response?.status===401 &&!originalRequest._retry){\n            originalRequest._retry = true;\n            try {\n                const refresh = localStorage.getItem('refresh')\n                const res = await axios.post(apiBaseUrl+'/token/refresh')\n                localStorage.setItem('access',res.data.access)\n                originalRequest.headers.Authorization = `Bearer ${res.data.access}`\n            } catch (error) {\n                localStorage.removeItem('access')\n                localStorage.removeItem('refresh')\n                window.location.href = '/login'\n            }\n        }\n        console.log(\"Error response:\", error.response)\n       toast.error(error.response.data.message || 'An error occurred')\n        return Promise.reject(error)\n    }\n)\n\nexport default api  "],"names":[],"mappings":";;;AAImB;AAJnB;AACA;;;AAGA,MAAM,aAAa,iEAAmC;AAEtD,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACrB,SAAQ;AACZ;AAGA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CACxB,CAAC;IACG,QAAQ,GAAG,CAAC,YAAW;IACvB,wCAAgC;QAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAG,OAAM;YACL,OAAO,OAAO,CAAC,aAAa,GAAG,AAAC,UAAe,OAAN;QAC7C;IACJ;IAEE,2DAA2D;IAC7D,IACI,OAAO,MAAM,KAAK,UAClB,OAAO,MAAM,KAAK,SAClB,OAAO,MAAM,KAAK,SACpB;QACE,IAAI,CAAC,OAAO,OAAO,CAAC,eAAe,EAAE;YACjC,OAAO,OAAO,CAAC,eAAe,GAAG;QACrC;IACJ;IACA,OAAO;AACX,GACA,CAAC,QAAQ,QAAQ,MAAM,CAAC;AAG5B,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CACzB,CAAC,WAAW,UACZ,OAAO;QAEA;IADH,MAAM,kBAAkB,MAAM,MAAM;IACpC,IAAG,EAAA,kBAAA,MAAM,QAAQ,cAAd,sCAAA,gBAAgB,MAAM,MAAG,OAAM,CAAC,gBAAgB,MAAM,EAAC;QACtD,gBAAgB,MAAM,GAAG;QACzB,IAAI;YACA,MAAM,UAAU,aAAa,OAAO,CAAC;YACrC,MAAM,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,aAAW;YACxC,aAAa,OAAO,CAAC,UAAS,IAAI,IAAI,CAAC,MAAM;YAC7C,gBAAgB,OAAO,CAAC,aAAa,GAAG,AAAC,UAAyB,OAAhB,IAAI,IAAI,CAAC,MAAM;QACrE,EAAE,OAAO,OAAO;YACZ,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;QAC3B;IACJ;IACA,QAAQ,GAAG,CAAC,mBAAmB,MAAM,QAAQ;IAC9C,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC,MAAM,QAAQ,CAAC,IAAI,CAAC,OAAO,IAAI;IAC1C,OAAO,QAAQ,MAAM,CAAC;AAC1B;uCAGW","debugId":null}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///home/behaylu/Documents/project/upwork/postwork/bookshelf/frontend/lib/services/userService.ts"],"sourcesContent":["import axios  from '../axios';\nimport { User } from '@/type/user';\n\nexport const userService = {\n    registerUser,\n    login,\n    logout,\n    getCurrentUser\n}\n function registerUser (userData:any){\n    return  axios.post('/register/',userData)\n   \n}\n\nasync function login (data:{username:string , password:string}){\n    \n    return await axios.post('/token/',data)\n}\n\nasync function getCurrentUser(){\n    return await axios.get('/me/')\n}\n\n\nasync function logout(){\n    localStorage.removeItem('access')\n    localStorage.removeItem('refresh')\n    window.location.href = '/login'\n}\n\n"],"names":[],"mappings":";;;AAAA;;AAGO,MAAM,cAAc;IACvB;IACA;IACA;IACA;AACJ;AACC,SAAS,aAAc,QAAY;IAChC,OAAQ,+GAAA,CAAA,UAAK,CAAC,IAAI,CAAC,cAAa;AAEpC;AAEA,eAAe,MAAO,IAAwC;IAE1D,OAAO,MAAM,+GAAA,CAAA,UAAK,CAAC,IAAI,CAAC,WAAU;AACtC;AAEA,eAAe;IACX,OAAO,MAAM,+GAAA,CAAA,UAAK,CAAC,GAAG,CAAC;AAC3B;AAGA,eAAe;IACX,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;IACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;AAC3B","debugId":null}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///home/behaylu/Documents/project/upwork/postwork/bookshelf/frontend/app/register/page.tsx"],"sourcesContent":["\"use client\";\nimport Image from \"next/image\"\nimport Link from \"next/link\"\n\nimport  {useForm} from 'react-hook-form';\nimport { User} from \"@/type/user\";\nimport {userService} from \"@/lib/services/userService\"\nimport { useState } from \"react\";\nimport toast from 'react-hot-toast';\nimport { useRouter } from \"next/navigation\";\n\nexport default function Register(){\n\n    const { register, handleSubmit, formState:{errors}} = useForm<User>();\n    const [isLoading,setIsLoading]= useState<boolean>(false)\n    const router = useRouter()\n    const onSubmit = async (data:any)=>{\n        setIsLoading(true)\n       userService.registerUser(data).then((res:any)=>{\n        \n          setIsLoading(false)\n          toast.success(\"Uder has registered successfully\")\n           router.push('/login')\n        }).catch((error:any)=>{\n             \n          setIsLoading(false)\n        })\n    }\n\n    return(\n        <div className=\"w-full h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900\">\n            <div className=\"w-1/2 bg-white flex justify-between\">\n                \n                <div className=\"flex-1 flex flex-col items-center justify-center py-12 px-10 bg-black rounded-r-4xl\">\n                    <div>\n                        <Image \n                            className=\"dark:invert\"\n                            src=\"/globe.svg\"\n                            alt=\"Vercel logomark\"\n                            width={180}\n                            height={38}\n                        />\n                        <h3 className=\"font-montserrat font-medium text-[23px] text-white text-center my-8 tracking-[12px]\">BookWarm</h3>\n                    </div>\n                    <span className=\"text-[14px] text-white my-8 font-normal\"> New to our platform? Sign In now.</span>\n                    <Link href={'/login'} className=\"py-2 px-16 text-center border border-white text-white rounded-lg hover:bg-white    /80 transition-all duration-300 cursor-pointer\">Sign In</Link>\n                </div>\n\n                <div className=\"flex-1 flex flex-col items-center justify-center gap-4 mb-8 py-12 px-10\">\n                    <Image\n                        className=\"dark:invert\"\n                        src=\"/globe.svg\"\n                        alt=\"Next.js logo\"\n                        width={180}\n                        height={38}\n                        priority\n                    />\n                    <div className=\"flex flex-col items-center\">\n                        <h3 className=\"font-montserrat font-medium text-[23px] text-gray-900 text-center dark:text-white my-8 tracking-[12px]\">Create Account</h3>\n                        <span className=\"w-full text-center mb-8 font-normal text-[14px] text-gray-700 dark:text-gray-300\">Please enter your details to create an account</span>\n                     <form onSubmit={handleSubmit(onSubmit)} className=\"w-full\">\n                        <input \n                            type=\"text\" \n                            id=\"username\"\n                            {...register(\"username\", { required:\"Username is required\" })}\n                            \n                            placeholder=\"Username\"\n                            className=\"w-full h-10 px-4 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:border-blue-500\"\n                        />\n                        {errors.username && <span className=\"text-red-500\">{errors.username.message}</span>}\n                        <input\n                            type=\"email\"\n                            id=\"email\"\n                            {...register(\"email\", { required: \"Email is required\" })}\n                            placeholder=\"Email\"\n                            className=\"w-full h-10 px-4 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:border-blue-500\"\n                        />\n                        {errors.email && <span className=\"text-red-500\">{errors.email.message}</span>}\n                        <input\n                            type=\"password\"\n                           id=\"password\"\n                           {...register(\"password\", { required:\"Password is required\"})}\n                            placeholder=\"Password\"\n                            className=\"w-full h-10 px-4 border border-gray-300 rounded-lg mb-2 focus:outline-none focus:border-blue-500\"\n                        />\n                        <button \n                        type=\"submit\"\n                        className=\"w-full bg-black text-white text-center py-2 mt-5 font-medium rounded-lg hover:bg-black/80 transition-all duration-300 cursor-pointer\">\n                            {isLoading?<span className=\"inline-block w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\"></span>:\"Sign Up\"}\n                            \n                            \n                            </button>\n                     </form>\n                    </div>\n\n                    \n\n                </div>\n                \n            </div>\n        </div>      \n        \n    )\n}"],"names":[],"mappings":";;;;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;;;AATA;;;;;;;;AAWe,SAAS;;IAEpB,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAU,EAAC,MAAM,EAAC,EAAC,GAAG,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD;IAC5D,MAAM,CAAC,WAAU,aAAa,GAAE,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAW;IAClD,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,WAAW,OAAO;QACpB,aAAa;QACd,iIAAA,CAAA,cAAW,CAAC,YAAY,CAAC,MAAM,IAAI,CAAC,CAAC;YAElC,aAAa;YACb,0JAAA,CAAA,UAAK,CAAC,OAAO,CAAC;YACb,OAAO,IAAI,CAAC;QACf,GAAG,KAAK,CAAC,CAAC;YAER,aAAa;QACf;IACJ;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;;8CACG,6LAAC,gIAAA,CAAA,UAAK;oCACF,WAAU;oCACV,KAAI;oCACJ,KAAI;oCACJ,OAAO;oCACP,QAAQ;;;;;;8CAEZ,6LAAC;oCAAG,WAAU;8CAAsF;;;;;;;;;;;;sCAExG,6LAAC;4BAAK,WAAU;sCAA0C;;;;;;sCAC1D,6LAAC,+JAAA,CAAA,UAAI;4BAAC,MAAM;4BAAU,WAAU;sCAAoI;;;;;;;;;;;;8BAGxK,6LAAC;oBAAI,WAAU;;sCACX,6LAAC,gIAAA,CAAA,UAAK;4BACF,WAAU;4BACV,KAAI;4BACJ,KAAI;4BACJ,OAAO;4BACP,QAAQ;4BACR,QAAQ;;;;;;sCAEZ,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;8CAAyG;;;;;;8CACvH,6LAAC;oCAAK,WAAU;8CAAmF;;;;;;8CACtG,6LAAC;oCAAK,UAAU,aAAa;oCAAW,WAAU;;sDAC/C,6LAAC;4CACG,MAAK;4CACL,IAAG;4CACF,GAAG,SAAS,YAAY;gDAAE,UAAS;4CAAuB,EAAE;4CAE7D,aAAY;4CACZ,WAAU;;;;;;wCAEb,OAAO,QAAQ,kBAAI,6LAAC;4CAAK,WAAU;sDAAgB,OAAO,QAAQ,CAAC,OAAO;;;;;;sDAC3E,6LAAC;4CACG,MAAK;4CACL,IAAG;4CACF,GAAG,SAAS,SAAS;gDAAE,UAAU;4CAAoB,EAAE;4CACxD,aAAY;4CACZ,WAAU;;;;;;wCAEb,OAAO,KAAK,kBAAI,6LAAC;4CAAK,WAAU;sDAAgB,OAAO,KAAK,CAAC,OAAO;;;;;;sDACrE,6LAAC;4CACG,MAAK;4CACN,IAAG;4CACF,GAAG,SAAS,YAAY;gDAAE,UAAS;4CAAsB,EAAE;4CAC3D,aAAY;4CACZ,WAAU;;;;;;sDAEd,6LAAC;4CACD,MAAK;4CACL,WAAU;sDACL,0BAAU,6LAAC;gDAAK,WAAU;;;;;uDAAuG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAe9J;GA5FwB;;QAEkC,iKAAA,CAAA,UAAO;QAE9C,qIAAA,CAAA,YAAS;;;KAJJ","debugId":null}}]
}