{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/behaylu/Documents/project/upwork/postwork/restaurantSaaS/frontend/lib/axios.ts"],"sourcesContent":["import axios from 'axios'\nimport toast from 'react-hot-toast'\n\n\nconst apiBaseUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api'\n\nconst api = axios.create({\n    baseURL:apiBaseUrl\n})\n\n\napi.interceptors.request.use(\n    (config)=>{\n        console.log(\"base URL\",apiBaseUrl)\n        if(typeof window !=='undefined'){\n            const token = localStorage.getItem('access')\n            if(token){\n                config.headers.Authorization = `Bearer ${token}`\n            }\n        }\n\n          // Ensure Content-Type is set for POST, PUT, PATCH requests\n        if (\n            config.method === 'post' ||\n            config.method === 'put' ||\n            config.method === 'patch'\n        ) {\n            if (!config.headers['Content-Type']) {\n                config.headers['Content-Type'] = 'application/json'\n            }\n        }\n        return config\n    },\n    (error)=>Promise.reject(error)\n)\n\napi.interceptors.response.use(\n    (response)=>response,\n    async (error)=>{\n        const originalRequest = error.config\n        if(error.response?.status===401 &&!originalRequest._retry){\n            originalRequest._retry = true;\n            try {\n                const refresh = localStorage.getItem('refresh')\n                const res = await axios.post(apiBaseUrl+'/token/refresh')\n                localStorage.setItem('access',res.data.access)\n                originalRequest.headers.Authorization = `Bearer ${res.data.access}`\n            } catch (error) {\n                localStorage.removeItem('access')\n                localStorage.removeItem('refresh')\n                window.location.href = '/login'\n            }\n        }\n        console.log(\"Error response:\", error.response)\n       toast.error(error.response?.data?.message || 'An error occurred')\n        return Promise.reject(error)\n    }\n)\n\nexport default api  "],"names":[],"mappings":";;;AAImB;AAJnB;AACA;;;AAGA,MAAM,aAAa,iEAAmC;AAEtD,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACrB,SAAQ;AACZ;AAGA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CACxB,CAAC;IACG,QAAQ,GAAG,CAAC,YAAW;IACvB,wCAAgC;QAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAG,OAAM;YACL,OAAO,OAAO,CAAC,aAAa,GAAG,AAAC,UAAe,OAAN;QAC7C;IACJ;IAEE,2DAA2D;IAC7D,IACI,OAAO,MAAM,KAAK,UAClB,OAAO,MAAM,KAAK,SAClB,OAAO,MAAM,KAAK,SACpB;QACE,IAAI,CAAC,OAAO,OAAO,CAAC,eAAe,EAAE;YACjC,OAAO,OAAO,CAAC,eAAe,GAAG;QACrC;IACJ;IACA,OAAO;AACX,GACA,CAAC,QAAQ,QAAQ,MAAM,CAAC;AAG5B,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CACzB,CAAC,WAAW,UACZ,OAAO;QAEA,iBAcQ,sBAAA;IAfX,MAAM,kBAAkB,MAAM,MAAM;IACpC,IAAG,EAAA,kBAAA,MAAM,QAAQ,cAAd,sCAAA,gBAAgB,MAAM,MAAG,OAAM,CAAC,gBAAgB,MAAM,EAAC;QACtD,gBAAgB,MAAM,GAAG;QACzB,IAAI;YACA,MAAM,UAAU,aAAa,OAAO,CAAC;YACrC,MAAM,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,aAAW;YACxC,aAAa,OAAO,CAAC,UAAS,IAAI,IAAI,CAAC,MAAM;YAC7C,gBAAgB,OAAO,CAAC,aAAa,GAAG,AAAC,UAAyB,OAAhB,IAAI,IAAI,CAAC,MAAM;QACrE,EAAE,OAAO,OAAO;YACZ,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;QAC3B;IACJ;IACA,QAAQ,GAAG,CAAC,mBAAmB,MAAM,QAAQ;IAC9C,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC,EAAA,mBAAA,MAAM,QAAQ,cAAd,wCAAA,uBAAA,iBAAgB,IAAI,cAApB,2CAAA,qBAAsB,OAAO,KAAI;IAC5C,OAAO,QAAQ,MAAM,CAAC;AAC1B;uCAGW","debugId":null}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///home/behaylu/Documents/project/upwork/postwork/restaurantSaaS/frontend/lib/services/userService.ts"],"sourcesContent":["import axios  from '../axios';\nimport { ChangePasswordType, User } from '@/type/user';\n\nexport const userService = {\n    registerUser,\n    login,\n    logout,\n    getCurrentUser,\n    changePassword,\n    getUsers,\n    forgetPassword,\n    resetPassword,\n    updateProfile\n}\n function registerUser (userData:any){\n    return  axios.post('/register/',userData)\n   \n}\n\nasync function login (data:{username:string , password:string}){\n    \n    return await axios.post('/token/',data)\n}\n\nasync function getCurrentUser(){\n    return await axios.get('/me/')\n}\n\nasync function changePassword(data:ChangePasswordType){\n    return await axios.put('/change-password/',data)\n}\n\nasync function getUsers(data:any){\n    return await axios.get('/users/',{\n        params:{\n            ...data\n        }\n    })\n}\n\nasync function forgetPassword(email:string){\n    return await axios.post('/password-reset/',{email})\n}\n\nasync function resetPassword(data:{password:string, token:string}){\n    return await axios.post(`/password-reset/confirm/?token=${data.token}` ,data)\n}\n\nasync function updateProfile(data:User){\n    return await axios.patch(`/update-profile/${data.id}/`,data)\n}\n\n\n\n\n\n\n\nasync function logout(){\n    localStorage.removeItem('access')\n    localStorage.removeItem('refresh')\n    window.location.href = '/login'\n}\n\n"],"names":[],"mappings":";;;AAAA;;AAGO,MAAM,cAAc;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;AACJ;AACC,SAAS,aAAc,QAAY;IAChC,OAAQ,+GAAA,CAAA,UAAK,CAAC,IAAI,CAAC,cAAa;AAEpC;AAEA,eAAe,MAAO,IAAwC;IAE1D,OAAO,MAAM,+GAAA,CAAA,UAAK,CAAC,IAAI,CAAC,WAAU;AACtC;AAEA,eAAe;IACX,OAAO,MAAM,+GAAA,CAAA,UAAK,CAAC,GAAG,CAAC;AAC3B;AAEA,eAAe,eAAe,IAAuB;IACjD,OAAO,MAAM,+GAAA,CAAA,UAAK,CAAC,GAAG,CAAC,qBAAoB;AAC/C;AAEA,eAAe,SAAS,IAAQ;IAC5B,OAAO,MAAM,+GAAA,CAAA,UAAK,CAAC,GAAG,CAAC,WAAU;QAC7B,QAAO;YACH,GAAG,IAAI;QACX;IACJ;AACJ;AAEA,eAAe,eAAe,KAAY;IACtC,OAAO,MAAM,+GAAA,CAAA,UAAK,CAAC,IAAI,CAAC,oBAAmB;QAAC;IAAK;AACrD;AAEA,eAAe,cAAc,IAAoC;IAC7D,OAAO,MAAM,+GAAA,CAAA,UAAK,CAAC,IAAI,CAAC,AAAC,kCAA4C,OAAX,KAAK,KAAK,GAAI;AAC5E;AAEA,eAAe,cAAc,IAAS;IAClC,OAAO,MAAM,+GAAA,CAAA,UAAK,CAAC,KAAK,CAAC,AAAC,mBAA0B,OAAR,KAAK,EAAE,EAAC,MAAG;AAC3D;AAQA,eAAe;IACX,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;IACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;AAC3B","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///home/behaylu/Documents/project/upwork/postwork/restaurantSaaS/frontend/components/AuthContext.tsx"],"sourcesContent":["'use client'\nimport React, { createContext, useContext, useState,useEffect} from 'react';\nimport { userService } from '@/lib/services/userService';\nimport toast from 'react-hot-toast';\n\ninterface AuthContextProps {\n    user:any,\n    accessToken:string | null,\n    isAuthenticated: boolean,\n    login:(token:string)=> void,\n    logout:()=> void, \n}\n\n\nconst AuthContext = createContext<AuthContextProps | undefined>(undefined)\n\nexport const AuthProvider = ({ children}:{children:React.ReactNode})=>{\n    const [accessToken, setAccessToken] = useState<string | null>(null)\n    const [user, setUser] = useState<any>(null)\n     \n    useEffect(()=>{\nconst token = localStorage.getItem('access')\nif(token){\n    setAccessToken(token)\n   userService.getCurrentUser().then(response=>{\n        setUser(response.data.data)\n    }).catch(error=>{\n        console.error('Failed to fetch current user:', error)\n        setUser(null)\n    })      \n}\n    },[])\n\n    const login = (token:string)=>{\n        setAccessToken(token)\n        userService.getCurrentUser().then(response=>{\n            setUser(response.data.data)\n        }).catch(error=>{\n            toast.error('failed to fetch current user')\n        })\n    }\n\n    const logout = ()=>{\n      localStorage.removeItem('access')\n      setAccessToken(null)\n      setUser(null)\n    }\n\n\n    const isAuthenticated = !!accessToken\n\n    return (\n        <AuthContext.Provider value={{ user, accessToken, isAuthenticated, login, logout}}>\n            {children}\n        </AuthContext.Provider>\n    )\n}\n\nexport const useAuth = ()=>{\n    const context = useContext(AuthContext)\n    if(context == undefined){\n        throw new Error('useAuth must be used within an Authprovider')\n\n    }\n    return context\n}\n\n\n\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;AAHA;;;;AAcA,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAAgC;AAEzD,MAAM,eAAe;QAAC,EAAE,QAAQ,EAA4B;;IAC/D,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAC9D,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAO;IAEtC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACd,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAG,OAAM;gBACL,eAAe;gBAChB,iIAAA,CAAA,cAAW,CAAC,cAAc,GAAG,IAAI;8CAAC,CAAA;wBAC7B,QAAQ,SAAS,IAAI,CAAC,IAAI;oBAC9B;6CAAG,KAAK;8CAAC,CAAA;wBACL,QAAQ,KAAK,CAAC,iCAAiC;wBAC/C,QAAQ;oBACZ;;YACJ;QACI;iCAAE,EAAE;IAEJ,MAAM,QAAQ,CAAC;QACX,eAAe;QACf,iIAAA,CAAA,cAAW,CAAC,cAAc,GAAG,IAAI,CAAC,CAAA;YAC9B,QAAQ,SAAS,IAAI,CAAC,IAAI;QAC9B,GAAG,KAAK,CAAC,CAAA;YACL,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC;QAChB;IACJ;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,eAAe;QACf,QAAQ;IACV;IAGA,MAAM,kBAAkB,CAAC,CAAC;IAE1B,qBACI,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAa;YAAiB;YAAO;QAAM;kBAC3E;;;;;;AAGb;GAxCa;KAAA;AA0CN,MAAM,UAAU;;IACnB,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAG,WAAW,WAAU;QACpB,MAAM,IAAI,MAAM;IAEpB;IACA,OAAO;AACX;IAPa","debugId":null}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file:///home/behaylu/Documents/project/upwork/postwork/restaurantSaaS/frontend/components/CartContext.tsx"],"sourcesContent":["\"use client\";\nimport React, {\n  createContext,\n  useContext,\n  useState,\n  ReactNode,\n  useMemo,\n} from \"react\";\n\n// Type definitions\nexport interface CartItem {\n  id: string | number;\n  name: string;\n  price: number;\n  quantity: number;\n  image_url: string;\n  [key: string]: any;\n}\n\ninterface CartContextType {\n  cartItems: CartItem[];\n  addToCart: (item: CartItem) => void;\n  removeFromCart: (id: string | number) => void;\n  updateQuantity: (id: string | number, quantity: number) => void;\n  incrementQuantity: (id: string | number) => void;\n  decrementQuantity: (id: string | number) => void;\n  clearCart: () => void;\n  getById: (id: string | number) => CartItem | undefined;\n  totalPrice: number;\n  totalQuantity: number;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport const CartProvider = ({ children }: { children: ReactNode }) => {\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\n\n  const addToCart = (item: CartItem) => {\n    setCartItems((prev) => {\n      const exists = prev.find((i) => i.id === item.id);\n      if (exists) {\n        return prev.map((i) =>\n          i.id === item.id ? { ...i, quantity: i.quantity + 1 } : i,\n        );\n      }\n      return [...prev, { ...item, quantity: 1 }];\n    });\n  };\n\n  const removeFromCart = (id: string | number) => {\n    setCartItems((prev) => prev.filter((item) => item.id !== id));\n  };\n\n  const updateQuantity = (id: string | number, quantity: number) => {\n    setCartItems((prev) =>\n      prev.map((item) =>\n        item.id === id ? { ...item, quantity: quantity } : item,\n      ),\n    );\n  };\n\n  const incrementQuantity = (id: string | number) => {\n    setCartItems((prev) =>\n      prev.map((item) =>\n        item.id === id ? { ...item, quantity: item.quantity + 1 } : item,\n      ),\n    );\n  };\n\n  const decrementQuantity = (id: string | number) => {\n    setCartItems((prev) =>\n      prev.map((item) =>\n        item.id === id\n          ? { ...item, quantity: item.quantity > 1 ? item.quantity - 1 : 1 }\n          : item,\n      ),\n    );\n  };\n\n  const getById = (id: string | number) => {\n    return cartItems.find((item) => item.id === id);\n  };\n\n  const clearCart = () => setCartItems([]);\n\n  //  Total Price\n  const totalPrice = useMemo(() => {\n    return cartItems.reduce(\n      (total, item) => total + item.price * item.quantity,\n      0,\n    );\n  }, [cartItems]);\n\n  // Total Quantity\n  const totalQuantity = useMemo(() => {\n    return cartItems.reduce((total, item) => total + item.quantity, 0);\n  }, [cartItems]);\n\n  return (\n    <CartContext.Provider\n      value={{\n        cartItems,\n        addToCart,\n        removeFromCart,\n        updateQuantity,\n        incrementQuantity,\n        decrementQuantity,\n        getById,\n        clearCart,\n        totalPrice,\n        totalQuantity,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport const useCart = (): CartContextType => {\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error(\"useCart must be used within a CartProvider\");\n  }\n  return context;\n};\n"],"names":[],"mappings":";;;;;AACA;;;AADA;;AAgCA,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAA+B;AAExD,MAAM,eAAe;QAAC,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAc,EAAE;IAEzD,MAAM,YAAY,CAAC;QACjB,aAAa,CAAC;YACZ,MAAM,SAAS,KAAK,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,EAAE;YAChD,IAAI,QAAQ;gBACV,OAAO,KAAK,GAAG,CAAC,CAAC,IACf,EAAE,EAAE,KAAK,KAAK,EAAE,GAAG;wBAAE,GAAG,CAAC;wBAAE,UAAU,EAAE,QAAQ,GAAG;oBAAE,IAAI;YAE5D;YACA,OAAO;mBAAI;gBAAM;oBAAE,GAAG,IAAI;oBAAE,UAAU;gBAAE;aAAE;QAC5C;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,aAAa,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;IAC3D;IAEA,MAAM,iBAAiB,CAAC,IAAqB;QAC3C,aAAa,CAAC,OACZ,KAAK,GAAG,CAAC,CAAC,OACR,KAAK,EAAE,KAAK,KAAK;oBAAE,GAAG,IAAI;oBAAE,UAAU;gBAAS,IAAI;IAGzD;IAEA,MAAM,oBAAoB,CAAC;QACzB,aAAa,CAAC,OACZ,KAAK,GAAG,CAAC,CAAC,OACR,KAAK,EAAE,KAAK,KAAK;oBAAE,GAAG,IAAI;oBAAE,UAAU,KAAK,QAAQ,GAAG;gBAAE,IAAI;IAGlE;IAEA,MAAM,oBAAoB,CAAC;QACzB,aAAa,CAAC,OACZ,KAAK,GAAG,CAAC,CAAC,OACR,KAAK,EAAE,KAAK,KACR;oBAAE,GAAG,IAAI;oBAAE,UAAU,KAAK,QAAQ,GAAG,IAAI,KAAK,QAAQ,GAAG,IAAI;gBAAE,IAC/D;IAGV;IAEA,MAAM,UAAU,CAAC;QACf,OAAO,UAAU,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;IAC9C;IAEA,MAAM,YAAY,IAAM,aAAa,EAAE;IAEvC,eAAe;IACf,MAAM,aAAa,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;4CAAE;YACzB,OAAO,UAAU,MAAM;oDACrB,CAAC,OAAO,OAAS,QAAQ,KAAK,KAAK,GAAG,KAAK,QAAQ;mDACnD;QAEJ;2CAAG;QAAC;KAAU;IAEd,iBAAiB;IACjB,MAAM,gBAAgB,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;+CAAE;YAC5B,OAAO,UAAU,MAAM;uDAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,QAAQ;sDAAE;QAClE;8CAAG;QAAC;KAAU;IAEd,qBACE,6LAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;GAlFa;KAAA;AAoFN,MAAM,UAAU;;IACrB,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANa","debugId":null}}]
}